<script src="https://cdn.tailwindcss.com"></script>
<header class="bg-white">
  <nav class="container mx-auto px-4 py-4">
    <div class="flex justify-between items-center">
      <a href="/" class="w-32 md:w-44 py-4 md:py-6">
        <img
          src="https://avtoobuv73.ru/img/logo.png"
          alt="logo"
          class="w-full h-auto"
        />
      </a>

      <div class="flex items-center gap-3 md:hidden">
        <button
          type="button"
          class="p-2 text-gray-400 rounded-lg hover:bg-gray-200 transition-colors"
          id="basket_navbar_mobile"
        >
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
            <path
              d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"
            />
          </svg>
        </button>

        <!-- бургер -->
        <button
          id="burger-menu"
          class="p-2 rounded-lg hover:bg-gray-200 transition-colors"
        >
          <svg
            class="w-6 h-6 text-gray-700"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
      </div>

      <div
        id="mobile-menu"
        class="md:hidden fixed inset-0 z-40 bg-white transform -translate-x-full transition-transform duration-300"
      >
        <div class="flex flex-col h-full">
          <div class="flex justify-between items-center p-6 border-b">
            <a href="/" class="w-32">
              <img src="https://avtoobuv73.ru/img/logo.png" alt="logo" />
            </a>
            <button id="close-menu" class="p-2">
              <svg
                class="w-6 h-6 text-gray-700"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>

          <div class="flex-1 overflow-y-auto p-6">
            <div class="space-y-4">
              <a
                href="/"
                class="block text-lg font-medium text-gray-700 hover:text-black py-2"
              >
                Главная
              </a>
              <a
                href="/selection"
                class="block text-lg font-medium text-gray-700 hover:text-black py-2"
              >
                Подбор
              </a>
              <a
                href="/catalog"
                class="block text-lg font-medium text-gray-700 hover:text-black py-2"
              >
                Каталог
              </a>
              <a
                href="/about"
                class="block text-lg font-medium text-gray-700 hover:text-black py-2"
              >
                О нас
              </a>
              <a
                href="/reviews"
                class="block text-lg font-medium text-gray-700 hover:text-black py-2"
              >
                Отзывы
              </a>
              <a
                href="/contacts"
                class="block text-lg font-medium text-gray-700 hover:text-black py-2"
              >
                Контакты
              </a>
            </div>

            <div class="mt-8">
              <div
                class="flex items-center border-2 border-gray-300 rounded-lg"
              >
                <input
                  type="search"
                  placeholder="⌕ Поиск..."
                  class="w-full h-12 px-4 bg-transparent focus:outline-none placeholder-gray-400"
                />
                <button class="px-4 py-3 text-gray-500">
                  <svg
                    class="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                    />
                  </svg>
                </button>
              </div>
            </div>
          </div>

          <div class="p-6 border-t">
            <button
              class="w-full flex items-center justify-center gap-2 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors"
              id="basket_navbar_mobile_menu"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"
                />
              </svg>
              Корзина
            </button>
          </div>
        </div>
      </div>

      <!-- навигация -->
      <div class="hidden md:flex flex-col items-end w-full md:w-auto">
        <div class="flex items-center space-x-6 mb-4">
          <a
            href="/"
            class="text-gray-400 font-bold hover:text-black transition-all duration-200"
          >
            Главная
          </a>
          <a
            href="/selection"
            class="text-gray-400 font-bold hover:text-black transition-all duration-200"
          >
            Подбор
          </a>
          <a
            href="/catalog"
            class="text-gray-400 font-bold hover:text-black transition-all duration-200"
          >
            Каталог
          </a>
          <a
            href="/about"
            class="text-gray-400 font-bold hover:text-black transition-all duration-200"
          >
            О нас
          </a>
          <a
            href="/reviews"
            class="text-gray-400 font-bold hover:text-black transition-all duration-200"
          >
            Отзывы
          </a>
          <a
            href="/contacts"
            class="text-gray-400 font-bold hover:text-black transition-all duration-200"
          >
            Контакты
          </a>
        </div>

        <div
          class="flex items-center border-2 border-gray-300 rounded-lg hover:border-gray-400 transition-all w-full md:w-auto"
          style="width: 40vw"
        >
         <!-- Найдите этот блок в вашем коде -->
<button
  type="button"
  class="px-4 py-3 text-gray-400 hover:bg-gray-100 transition-colors flex items-center gap-2 border-r border-gray-300"
  id="categories-btn"
>
  <span class="font-medium hidden lg:inline">Категории</span>
  <span class="font-medium lg:hidden">Категории</span>
  <svg
    class="w-4 h-4 text-gray-500 transition-transform duration-200"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"
    id="categories-icon"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M19 9l-7 7-7-7"
    />
  </svg>
</button>

<!-- Добавьте этот div ПРЯМО ПОСЛЕ кнопки категорий -->
<div id="categories-dropdown" class="absolute top-full left-0 mt-1 w-64 bg-white rounded-lg shadow-xl border border-gray-200 z-50 hidden">
  <div class="py-2">
    <a href="#" class="flex items-center px-4 py-3 hover:bg-gray-50 text-gray-700">
      <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
      </svg>
      Все товары
    </a>
    <a href="#" class="flex items-center px-4 py-3 hover:bg-gray-50 text-gray-700 border-t border-gray-100">
      <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
      </svg>
      Шины
    </a>
    <a href="#" class="flex items-center px-4 py-3 hover:bg-gray-50 text-gray-700 border-t border-gray-100">
      <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10" stroke-width="2"/>
      </svg>
      Диски
    </a>
    <a href="#" class="flex items-center px-4 py-3 hover:bg-gray-50 text-gray-700 border-t border-gray-100">
      <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
      </svg>
      Зимние шины
    </a>
  </div>
</div>

          <div class="flex-1 flex items-center md:w-64 lg:w-80 xl:w-96">
            <input
              type="search"
              placeholder="⌕ Поиск..."
              class="w-full h-full px-4 py-3 text-lg bg-transparent focus:outline-none placeholder-gray-400"
            />
          </div>

          <button
            type="button"
            class="px-4 py-3 text-gray-400 hover:bg-gray-100 transition-colors border-l border-gray-300 relative"
            id="basket_navbar_desktop"
          >
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </nav>
</header>

<script>
  // Добавьте этот код в ваш существующий скрипт, после кода для корзины

// Управление выпадающим списком категорий
const categoriesBtn = document.getElementById('categories-btn');
const categoriesDropdown = document.getElementById('categories-dropdown');
const categoriesIcon = document.getElementById('categories-icon');

if (categoriesBtn && categoriesDropdown) {
  // Открытие/закрытие по клику на кнопку
  categoriesBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    categoriesDropdown.classList.toggle('hidden');
    categoriesIcon.classList.toggle('rotate-180');
  });

  // Закрытие по клику вне области
  document.addEventListener('click', (e) => {
    if (!categoriesBtn.contains(e.target) && !categoriesDropdown.contains(e.target)) {
      categoriesDropdown.classList.add('hidden');
      categoriesIcon.classList.remove('rotate-180');
    }
  });

  // Закрытие по ESC
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !categoriesDropdown.classList.contains('hidden')) {
      categoriesDropdown.classList.add('hidden');
      categoriesIcon.classList.remove('rotate-180');
    }
  });

  // Закрытие при клике на ссылку в dropdown
  categoriesDropdown.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      categoriesDropdown.classList.add('hidden');
      categoriesIcon.classList.remove('rotate-180');
    });
  });
}
  // Бургер-меню
  const burgerMenu = document.getElementById("burger-menu");
  const mobileMenu = document.getElementById("mobile-menu");
  const closeMenu = document.getElementById("close-menu");

  if (burgerMenu && mobileMenu && closeMenu) {
    burgerMenu.addEventListener("click", () => {
      mobileMenu.classList.remove("-translate-x-full");
      document.body.style.overflow = "hidden";
    });

    closeMenu.addEventListener("click", () => {
      mobileMenu.classList.add("-translate-x-full");
      document.body.style.overflow = "";
    });

    // Закрытие по клику на ссылку
    mobileMenu.querySelectorAll("a").forEach((link) => {
      link.addEventListener("click", () => {
        mobileMenu.classList.add("-translate-x-full");
        document.body.style.overflow = "";
      });
    });

    // Закрытие по ESC
    document.addEventListener("keydown", (e) => {
      if (
        e.key === "Escape" &&
        !mobileMenu.classList.contains("-translate-x-full")
      ) {
        mobileMenu.classList.add("-translate-x-full");
        document.body.style.overflow = "";
      }
    });
  }

  //  корзина
  const basketMobile = document.getElementById("basket_navbar_mobile");
  const basketMobileMenu = document.getElementById("basket_navbar_mobile_menu");
  const basketDesktop = document.getElementById("basket_navbar_desktop");

  function handleBasketClick(e) {
    if (e) e.preventDefault();
    showBasketModal();
  }

  if (basketMobile) {
    basketMobile.addEventListener("click", handleBasketClick);
  }

  if (basketMobileMenu) {
    basketMobileMenu.addEventListener("click", (e) => {
      e.preventDefault();
      mobileMenu.classList.add("-translate-x-full");
      document.body.style.overflow = "";
      showBasketModal();
    });
  }

  if (basketDesktop) {
    basketDesktop.addEventListener("click", handleBasketClick);
  }

  function showBasketModal() {
    if (document.getElementById("basket-modal")) {
      return;
    }

    const modal = document.createElement("div");
    modal.id = "basket-modal";
    modal.innerHTML = `
        <div class="modal-overlay fixed inset-0 bg-black bg-opacity-50 z-50">
            <div class="modal-content bg-white h-full w-full md:w-96 lg:w-1/3 xl:w-1/4 ml-auto">
                <div class="modal-header flex justify-between items-center p-6 border-b">
                    <h3 class="text-xl font-bold flex items-center gap-2">
                      <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                      </svg>
                      Корзина
                    </h3>
                    <button class="close-modal text-gray-500 hover:text-gray-700 text-2xl">
                        &times;
                    </button>
                </div>
                <div class="modal-body p-6 h-[calc(100vh-200px)] overflow-y-auto">
                    <div class="empty-cart text-center py-8">
                        <div class="text-gray-400 mb-4">
                            <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                            </svg>
                        </div>
                        <p class="text-gray-600 mb-4">Ваша корзина пуста</p>
                    </div>
                </div>
                <div class="modal-footer p-6 border-t bg-white">
                    <div class="flex justify-between items-center mb-4">
                        <span class="font-bold">Итого:</span>
                        <span class="text-xl font-bold">0 ₽</span>
                    </div>
                    <button class="w-full bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700 transition-colors">
                        Перейти к оформлению
                    </button>
                </div>
            </div>
        </div>
    `;

    document.body.appendChild(modal);
    document.body.style.overflow = "hidden";

    const style = document.createElement("style");
    style.textContent = `
      #basket-modal .modal-overlay {
        animation: fadeIn 0.3s ease;
      }
      #basket-modal .modal-content {
        animation: slideInRight 0.3s ease;
      }
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      @keyframes slideInRight {
        from { transform: translateX(100%); }
        to { transform: translateX(0); }
      }
      @keyframes slideOutRight {
        from { transform: translateX(0); }
        to { transform: translateX(100%); }
      }
      @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
      }
    `;
    document.head.appendChild(style);

    const closeBtn = modal.querySelector(".close-modal");
    const overlay = modal.querySelector(".modal-overlay");

    function closeModal() {
      const modalContent = modal.querySelector(".modal-content");

      overlay.style.animation = "fadeOut 0.3s ease forwards";
      modalContent.style.animation = "slideOutRight 0.3s ease forwards";

      setTimeout(() => {
        if (document.body.contains(modal)) {
          document.body.removeChild(modal);
        }
        if (document.head.contains(style)) {
          document.head.removeChild(style);
        }
        document.body.style.overflow = "";
      }, 300);
    }

    closeBtn.addEventListener("click", closeModal);
    overlay.addEventListener("click", (e) => {
      if (e.target === overlay) {
        closeModal();
      }
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        closeModal();
      }
    });
  }
  // Глобальный объект для хранения корзины
  let cart = [];

  // Функция добавления в корзину (без data-атрибутов)
  function addToCartSimple(button) {
    const card = button.closest(".card");

    // Читаем информацию из существующих элементов
    const productImage = card.querySelector(".product-image img").src;
    const productName = card.querySelector(".product-name").textContent.trim();
    const productPrice = card
      .querySelector(".current-price")
      .textContent.replace("₽", "")
      .replace(/\s/g, "");

    // Создаем уникальный идентификатор товара (для предотвращения дубликатов)
    const productId = `${productImage}-${productPrice}`; // Можно использовать другое уникальное поле

    // Проверяем, есть ли товар уже в корзине
    const existingItem = cart.find((item) => item.id === productId);

    if (existingItem) {
      existingItem.quantity += 1;
    } else {
      cart.push({
        id: productId,
        name: productName,
        price: parseInt(productPrice),
        image: productImage,
        quantity: 1,
      });
    }

    // Обновляем отображение корзины
    updateCartDisplay();

    console.log(`Добавлен в корзину: ${productName}, цена: ${productPrice}₽`);
  }

  // Функция обновления отображения корзины
  function updateCartDisplay() {
    // Обновляем модальное окно, если оно открыто
    const modalBody = document.querySelector(".modal-body");
    const totalElement = document.querySelector(
      ".modal-footer .text-xl.font-bold"
    );

    if (modalBody && totalElement) {
      renderCartItems(modalBody, totalElement);
    }

    // Также можно обновлять счетчик в хедере (если добавишь элемент для него)
    updateCartCounter();
  }

  // Функция отрисовки товаров в корзине
  function renderCartItems(container, totalElement) {
    if (cart.length === 0) {
      container.innerHTML = `
      <div class="empty-cart text-center py-8">
        <div class="text-gray-400 mb-4">
          <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
          </svg>
        </div>
        <p class="text-gray-600 mb-4">Ваша корзина пуста</p>
      </div>
    `;
      totalElement.textContent = "0 ₽";
      return;
    }

    let cartHTML = "";
    let total = 0;

    cart.forEach((item) => {
      const itemTotal = item.price * item.quantity;
      total += itemTotal;

      cartHTML += `
      <div class="cart-item flex items-center gap-4 py-4 border-b">
        <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded">
        <div class="flex-1">
          <h4 class="font-medium">${item.name}</h4>
          <p class="text-gray-600">${item.price} ₽ × ${item.quantity}</p>
        </div>
        <div class="flex items-center gap-2">
          <span class="font-bold">${itemTotal} ₽</span>
          <button onclick="removeFromCart('${item.id}')" class="text-red-500 hover:text-red-700 ml-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
          </button>
        </div>
      </div>
    `;
    });

    container.innerHTML = cartHTML;
    totalElement.textContent = `${total} ₽`;
  }

  // Функция удаления из корзины
  function removeFromCart(productId) {
    cart = cart.filter((item) => item.id !== productId);
    updateCartDisplay();
  }

  // Функция обновления счетчика товаров (если добавишь элемент)
  function updateCartCounter() {
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    // Пример: обновление счетчика в хедере (если добавишь элемент с id="cart-count")
    const counterElement = document.getElementById("cart-count");
    if (counterElement) {
      counterElement.textContent = totalItems;
    }
  }

  // Обновляем функцию открытия корзины, чтобы она всегда отображала актуальные данные
  function showBasketModal() {
    if (document.getElementById("basket-modal")) {
      return;
    }

    const modal = document.createElement("div");
    modal.id = "basket-modal";
    modal.innerHTML = `
      <div class="modal-overlay fixed inset-0 bg-black bg-opacity-50 z-50">
          <div class="modal-content bg-white h-full w-full md:w-96 lg:w-1/3 xl:w-1/4 ml-auto">
              <div class="modal-header flex justify-between items-center p-6 border-b">
                  <h3 class="text-xl font-bold flex items-center gap-2">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                    </svg>
                    Корзина
                  </h3>
                  <button class="close-modal text-gray-500 hover:text-gray-700 text-2xl">
                      &times;
                  </button>
              </div>
              <div class="modal-body p-6 h-[calc(100vh-200px)] overflow-y-auto">
                <!-- Товары будут отрисованы функцией renderCartItems -->
              </div>
              <div class="modal-footer p-6 border-t bg-white">
                  <div class="flex justify-between items-center mb-4">
                      <span class="font-bold">Итого:</span>
                      <span class="text-xl font-bold">0 ₽</span>
                  </div>
                  <button class="w-full bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700 transition-colors">
                      Перейти к оформлению
                  </button>
              </div>
          </div>
      </div>
  `;

    document.body.appendChild(modal);
    document.body.style.overflow = "hidden";

    // Отображаем товары в корзине
    const modalBody = modal.querySelector(".modal-body");
    const totalElement = modal.querySelector(
      ".modal-footer .text-xl.font-bold"
    );
    renderCartItems(modalBody, totalElement);

    // Остальная логика модального окна остается без изменений...
    const style = document.createElement("style");
    style.textContent = `
    #basket-modal .modal-overlay {
      animation: fadeIn 0.3s ease;
    }
    #basket-modal .modal-content {
      animation: slideInRight 0.3s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideInRight {
      from { transform: translateX(100%); }
      to { transform: translateX(0); }
    }
    @keyframes slideOutRight {
      from { transform: translateX(0); }
      to { transform: translateX(100%); }
    }
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }
  `;
    document.head.appendChild(style);

    const closeBtn = modal.querySelector(".close-modal");
    const overlay = modal.querySelector(".modal-overlay");

    function closeModal() {
      const modalContent = modal.querySelector(".modal-content");

      overlay.style.animation = "fadeOut 0.3s ease forwards";
      modalContent.style.animation = "slideOutRight 0.3s ease forwards";

      setTimeout(() => {
        if (document.body.contains(modal)) {
          document.body.removeChild(modal);
        }
        if (document.head.contains(style)) {
          document.head.removeChild(style);
        }
        document.body.style.overflow = "";
      }, 300);
    }

    closeBtn.addEventListener("click", closeModal);
    overlay.addEventListener("click", (e) => {
      if (e.target === overlay) {
        closeModal();
      }
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        closeModal();
      }
    });
  }
</script>

<style>
  /* кресмтик */
  input[type="search"]::-webkit-search-cancel-button {
    -webkit-appearance: none;
    appearance: none;
    height: 16px;
    width: 16px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%239ca3af'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3C/svg%3E");
    background-size: contain;
    cursor: pointer;
  }

  input[type="search"]::-webkit-search-cancel-button:hover {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%236b7280'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3C/svg%3E");
  }

  input[type="search"]::-moz-search-clear-button {
    display: none;
  }

  html {
    scroll-behavior: smooth;
  }
</style>
